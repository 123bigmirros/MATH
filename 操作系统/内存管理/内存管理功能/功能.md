### 内存管理功能  
**内存空间的管理和回收**  
操作系统完成主存储器空间分配和管理   
- 连续分配管理方式  
是指为用户分配一个连续的内存空间  
    1. 单一连续分配  
    将内存分配系统区和用户区。系统区仅供操作系统使用。用户去只存在一道用户程序，也就是这个内存的用户空间由该程序独占  
       - 优点  
       实现简单，没有外部碎片，无需进行内存保护(内存中只存在一道程序)  
       - 缺点  
        只能用于单用户、单任务的操作系统，有内部碎片，存储器利用率低  
    2， 固定分区分配  
    将用户内存空间划分为若干固定大小的区域。每个分区只装一道作业。  
    分区划分有两种方法：  
        1. 分区大小相等  
        程序太小会造成浪费，程序太大无法装入，求法灵活性  
        2. 分区大小不等  
        分为大中小不同的分区  
       - 缺点  
           1. 程序可能太大而放不进如何一个分区，需要覆盖技术。
           2. 可能产生内部碎片
    3. 动态分区  
    根据程序需要动态的分配内存。  
    在运行过程中会产生外部碎片，需要操作系统进行紧凑。  
    分配策略：  
        1. 首次适应算法  
        空闲分区以地址递增的程序连接，分配时链首部顺序查找，找到大小能满足要求的第一个空闲分区分配个作业。  
            - 特点  
            实现简单，但会在低地址处形成较多的小的空闲分区，增加开销
        2. 邻近适应算法  
        首次适应算法的演变，不同之处是分配内存时从上次查找结束的位置开始继续查找。  
            - 特点  
            但会在链表尾部处分裂成小碎片，因为内存前面部分使用过后暂时不会参与分配
        3. 最佳适应算法  
        空闲分区按容量递增的次序形成链表，早到第一个满足要求且最小的空闲分区分配给作业  
            - 性能较差，因为需要排序。  
        4. 最坏适应算法  
        空闲分区按容量递减的次序形成链接，找到第一个能满足要求的最大分区，从中分割一部分存储空间给作业。

- 离散分配方式  
    1. 分页存储管理  
    将主存空间划分为大小相等且固定的块，块相对较小，作为主存的基本单位。  
    在系统中设置一个页表寄存器，存放页表在内存的起始位置和长度。  
    逻辑地址分为页号和页内偏移。
        - 地址变换过程(设页面大小为L,逻辑地址为A,物理地址为E)  
            1. 计算页号P(P = A/L)，计算页内偏移(W = A%L)
            2. 比较页号和页表长度M,若P$\ge$M，则产生越界中断，否则继续执行
            3. 页表中页号P对应的地址 = 页表始地址F + 页号P×页表项长度。取出该页表项内容，机物理块号
            4. 计算E = b×L+W
        - 多级页表  
        增加页表的级数，使上级页表指向的内存块存放下一级的页表，用于减少进程映射整个虚拟内存空间所需页表占用的空间。
    2. 分段存储管理  
    分段管理将用户进程的自然段划分为逻辑空间。已满足方便编程，信息共享和保护、动态增长和动态链接的需要。  
    地址分为段号和段内偏移
       - 地址变换过程  
            1. 从逻辑地址的前几位为段号，后几为为段内偏移
            2. 比较段号S和和段表长度M，若S$\ge$M，则产生越界中断，否则继续运行
            3. 段表中段号对应的段表项地址 = 段起始地址 + 段号S×段表项长度，取出段表项前几位(段长)，若段内偏移$\ge$ 段长，则产生越界中断。  
            4. 取出表项实址b，计算E = b+W，用E访问实际内存
    3. 段页式管理  
    作业地址空间首先分为若干逻辑段，每个段都有段号，然后将每个段分为若干页。

**地址转换**  
将逻辑地址转换为内存的物理地址。操作系统通过内存管理单元(MMU)协助实现地址转换。  

**内存空间扩充**  
利用虚拟存储技术或自动覆盖技术，从逻辑上扩充内存。  

**内存共享**  
允许多个进程访问内存的同一部分。
并不是所有的进程内存空间都适合共享，只有那些只读区域才可以共享。  

**存储保护**  
保证各道作业在各自的存储空间内运行，互不干扰。  
内存保护两种方法  
    1. 设置上下限寄存器。  
    存放用户作业的上限和下限地址，当CPU要访问一个地址时，分别和两个寄存器的值比较，判断有无越界。
    2. 重定位寄存器(基址地址寄存器)和界地址寄存器(限长寄存器)。  
    重定位寄存器含最小的物理地址值，界地址寄存器含有逻辑地址的最大值。内存管理将逻辑地址与界地址寄存器进行比较，若未发生地址越界，则加上重定位寄存器的值后映射成物理地址，再2送交内存单元。  
      



