### 控制器
**功能**  
1. 从主存中取出一条指令，并指出下一条指令在主存中的位置
2. 对指令进行译码或测试，产生相应的控制信号，以便产生相应的动作
3. 指挥并控制CPU、主存、输入输出设备之间的数据流动方向


**类型**  
根据产生微操作控制信号的方式不同，控制器可分为硬布线控制器和微程序控制器
- 硬布线控制器  
硬布线控制器是根据指令的要求、当前时序及外部内部的状态顺序发送一系列微操作控制信号。
  - CU的输入信号来源  
      1. 经指令译码器产生的指令信息(不是IR)
      2. 时序系统产生的机器周期信号和节拍信号
      3. 来自执行单元的反馈信息即标志

  - CPU的控制方式  
  控制单元控制一条指令执行的过程，实质上是一次执行一个确定的微操作序列的过程。
      1. 同步控制方式  
      指系统有一个统一的时钟，以最长的微操作序列和在繁琐的微操作作为标准，采用统一的节拍作为机器周期来运行不同的指令。
      2. 异步控制方式  
      不存在基准信号，各部件按自身固有速度工作，通过应答方式联络
      3. 联合控制方式  
      异步控制和同步控制的结合

  - 硬布线控制单元设计  
      1. 列出操作命令的操作时间表
      2. 进行操作信号综合
      3. 画出微操作命令的逻辑图


- 微程序控制器  
采用存储逻辑实现，把微操作信号代码化，使每条机器指令转化为一定微程序并存入一个专门的存储器，微操作控制信号由微指令产生  
  - 基本术语  
      1. 微命令与微操作  
      一个机械指令可以分界成一个微操作序列，微操作序列是计算机在最基本、不可再分的操作。  
      在微程序控制的计算机中，将控制部件想执行部件发出的各种控制命令称为微命令
      2. 微指令与微周期  
      微指令是若干微命令的集合。  
      一条微指令通常包括两个部分信息(操作控制字段和顺序控制字段)


  - 微程序工作过程
    1. 执行微指令公共操作  
    在机器开始运行时，自动将取指令微程序的入口地址送入CMAR中  
    2. 机器指令的操作码字段通过微地址线程部件产生该机器指令对应的微程序入口地址，并送入CMAR
    3. 从CM中逐条取出对应的微指令并执行
    4. 执行完一条机器指令的一个微程序后，重复步骤1  

  - 微指令编码方式
    1. 直接编码方式  
    命令字段的每个位都代表一个微命令
    2. 字段直接编码
    将微指令命令字段分成若干小字段，把互斥性微命令组合在同一字段中，把相容性微命令组合在不同字段中。每个字段要留出一个状态表示本字段不发出任何微命令
    3. 字段间接编码方式  
    一个字段的微命令用另一个字段中的微命令进行解释
  - 微指令地址形成方式
    1. 直接由微指令的下地址段指出
    2. 根据机器指令的操作码形成  

  - 微指令格式  
    1. 水平微指令格式  
    2. 垂直型微指令
    3. 混合型微指令  

  - 控制单元设计步骤  
    1. 写出对应机器指令的微操作命令及节拍安排
    2. 确定微指令格式
    3. 编写微指令码点



