### FTP

**概念**  
互联网上使用最广的文件传输协议，FTP提供交互式的访问，允许指明文件类型和格式，并允许文件具有存取文件。  
**组成**  
FTP由两大部分组成，主进程用来接收请求，从属进程用来处理请求

**功能**  
1. 提供不同系统间的文件传输能力
2. 以用户权限管理的方式提供用户对FTP服务器上的文件管理能力
3. 匿名FTP方式提供公用文件共享的能力。

**工作步骤**  
1. 打开21端口，是客户进程可以连接上
2. 等待客户进程发起请求
3. 启动从属进程来处理客户进程的请求
4. 回到等待状态

**实现**  
FTP使用两个并行的TCP连接；一个是控制连接(21端口)，一个是数据连接(20端口)

- 控制连接  
用来传输控制信息(连接请求、传送请求)

- 数据连接  
数据连接有两种传输方式:主动模式PORT和被动没事PASV。  
- 主动模式  
客户端随机开放一个端口，并发送PORT命令和该端口后给服务器，服务器用20端口和客户端开放端口连接并传送数据

- 被动模式  
客户端发送PASV命令，服务器在本地随机开放一个端口，并通知客户端，客户端连接到服务器开放的端口进行数据传输。
